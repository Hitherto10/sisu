@import url('https://fonts.googleapis.com/css2?family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700;1,9..40,400&display=swap');

@import "tailwindcss";

/* ============================================
   VIEWPORT & LAYOUT FIXES
   ============================================ */
html, body, #root {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  position: fixed;
  overscroll-behavior: none;
}

/* Prevent zoom on mobile */
@viewport {
  width: device-width;
  zoom: 1;
  user-zoom: fixed;
}

/* Prevent accidental zooming */
input, select, textarea {
  font-size: 16px !important;
}

/* ============================================
   CUSTOM FONTS
   ============================================ */
@font-face {
  font-family: "Outfit";
  src: url("./fonts/Outfit/static/Outfit-Regular.ttf");
  font-weight: normal;
  font-style: normal;
}

/* ============================================
   TAILWIND THEME CUSTOMIZATION (v4)
   ============================================ */
@theme {
  /* Border Radius */
  --radius-lg: var(--radius);
  --radius-md: calc(var(--radius) - 2px);
  --radius-sm: calc(var(--radius) - 4px);

  /* Custom Colors - now exposed as Tailwind utilities */
  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));
  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));
  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));
  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));
  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));
  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));
  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));
  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));
  --color-border: hsl(var(--border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));

  /* Sidebar colors */
  --color-sidebar: hsl(var(--sidebar-background));
  --color-sidebar-foreground: hsl(var(--sidebar-foreground));
  --color-sidebar-primary: hsl(var(--sidebar-primary));
  --color-sidebar-primary-foreground: hsl(var(--sidebar-primary-foreground));
  --color-sidebar-accent: hsl(var(--sidebar-accent));
  --color-sidebar-accent-foreground: hsl(var(--sidebar-accent-foreground));
  --color-sidebar-border: hsl(var(--sidebar-border));
  --color-sidebar-ring: hsl(var(--sidebar-ring));

  /* Custom theme colors */
  --color-star: hsl(var(--star));
  --color-warm-gold: hsl(var(--warm-gold));
  --color-warm-amber: hsl(var(--warm-amber));
  --color-reading-sepia: hsl(var(--reading-sepia));
  --color-reading-dark-bg: hsl(var(--reading-dark-bg));
  --color-reading-dark-fg: hsl(var(--reading-dark-fg));

  --color-cream: #faf8f5;
  --color-burnt-orange: #c36322;
  --color-soft-beige: #ece7df;
  --color-dark-cocoa: #2a2522;

  /* Chart colors */
  --color-chart-1: hsl(var(--chart-1));
  --color-chart-2: hsl(var(--chart-2));
  --color-chart-3: hsl(var(--chart-3));
  --color-chart-4: hsl(var(--chart-4));
  --color-chart-5: hsl(var(--chart-5));

  /* Font Families */
  --font-family-serif-display: 'Libre Baskerville', serif;
  --font-family-sans-body: 'DM Sans', sans-serif;
  --font-family-outfit: 'Outfit', serif;
}

/* ============================================
   CSS VARIABLES (Theme Tokens)
   ============================================ */
:root {
  --background: 36 33% 97%;
  --foreground: 19 10% 15%;

  --card: 37 25% 93%;
  --card-foreground: 19 10% 15%;

  --popover: 36 33% 97%;
  --popover-foreground: 19 10% 15%;

  --primary: 24 70% 45%;
  --primary-foreground: 36 33% 97%;

  --secondary: 37 25% 90%;
  --secondary-foreground: 19 10% 25%;

  --muted: 37 20% 92%;
  --muted-foreground: 19 8% 50%;

  --accent: 24 70% 45%;
  --accent-foreground: 36 33% 97%;

  --destructive: 0 65% 55%;
  --destructive-foreground: 36 33% 97%;

  --border: 37 20% 88%;
  --input: 37 20% 85%;
  --ring: 24 70% 45%;

  --radius: 1rem;

  --sidebar-background: 36 30% 95%;
  --sidebar-foreground: 24 10% 25%;
  --sidebar-primary: 24 70% 45%;
  --sidebar-primary-foreground: 36 33% 97%;
  --sidebar-accent: 36 25% 90%;
  --sidebar-accent-foreground: 24 10% 25%;
  --sidebar-border: 30 20% 88%;
  --sidebar-ring: 24 70% 45%;

  --chart-1: 12 76% 61%;
  --chart-2: 173 58% 39%;
  --chart-3: 197 37% 24%;
  --chart-4: 43 74% 66%;
  --chart-5: 27 87% 67%;

  --warm-gold: 40 75% 55%;
  --warm-amber: 30 80% 50%;
  --reading-sepia: 36 40% 92%;
  --reading-dark-bg: 220 20% 12%;
  --reading-dark-fg: 36 20% 85%;
  --star: 45 90% 55%;
}

.dark {
  --background: 220 20% 10%;
  --foreground: 36 20% 90%;

  --card: 220 18% 14%;
  --card-foreground: 36 20% 90%;

  --popover: 220 18% 14%;
  --popover-foreground: 36 20% 90%;

  --primary: 24 70% 55%;
  --primary-foreground: 220 20% 10%;

  --secondary: 220 15% 20%;
  --secondary-foreground: 36 20% 85%;

  --muted: 220 15% 18%;
  --muted-foreground: 36 10% 55%;

  --accent: 150 30% 45%;
  --accent-foreground: 220 20% 10%;

  --destructive: 0 62.8% 30.6%;
  --destructive-foreground: 36 20% 90%;

  --border: 220 15% 22%;
  --input: 220 15% 22%;
  --ring: 24 70% 55%;

  --sidebar-background: 220 18% 12%;
  --sidebar-foreground: 36 20% 85%;
  --sidebar-primary: 24 70% 55%;
  --sidebar-primary-foreground: 220 20% 10%;
  --sidebar-accent: 220 15% 18%;
  --sidebar-accent-foreground: 36 20% 85%;
  --sidebar-border: 220 15% 22%;
  --sidebar-ring: 24 70% 55%;

  --chart-1: 220 70% 50%;
  --chart-2: 160 60% 45%;
  --chart-3: 30 80% 55%;
  --chart-4: 280 65% 60%;
  --chart-5: 340 75% 55%;

  --warm-gold: 40 75% 55%;
  --warm-amber: 30 80% 50%;
  --reading-sepia: 36 40% 92%;
  --reading-dark-bg: 220 20% 12%;
  --reading-dark-fg: 36 20% 85%;
  --star: 45 90% 55%;
}

/* ============================================
   BASE STYLES
   ============================================ */
* {
  font-family: "Outfit", serif;
  @apply border-border;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

body {
  @apply bg-background text-foreground;
  overscroll-behavior: none;
  touch-action: pan-x pan-y;
}

h1, h2, h3, h4, h5, h6 {
  font-family: 'Libre Baskerville', serif;
}

/* ============================================
   READING TYPOGRAPHY IMPROVEMENTS
   ============================================ */
.reading-content {
  font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  line-height: 1.7;
  word-spacing: 0.05em;
  letter-spacing: 0.01em;
}

.reading-content p {
  margin-bottom: 1em;
  text-align: justify;
  hyphens: auto;
  -webkit-hyphens: auto;
  -moz-hyphens: auto;
}

.reading-content h1,
.reading-content h2,
.reading-content h3 {
  font-family: 'Libre Baskerville', serif;
  margin-top: 1.5em;
  margin-bottom: 0.75em;
  line-height: 1.3;
}

/* ============================================
   CUSTOM UTILITY CLASSES
   ============================================ */
.font-serif-display {
  font-family: 'Libre Baskerville', serif;
}

.font-sans-body {
  font-family: 'DM Sans', sans-serif;
}

/* Mobile safe area utilities */
.pb-safe {
  padding-bottom: calc(4.5rem + env(safe-area-inset-bottom, 0px));
}

.safe-area-bottom {
  padding-bottom: env(safe-area-inset-bottom, 0px);
}

/* Scrollbar utilities */
.no-scrollbar::-webkit-scrollbar {
  display: none;
}

.no-scrollbar {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

/* ============================================
   EPUB.JS IFRAME FIXES
   ============================================ */
/* Ensure epub content is properly contained */
.epub-container iframe {
  border: none !important;
  width: 100% !important;
  height: 100% !important;
  max-width: 100% !important;
  overflow: visible !important;
}

/* Fix for epub.js rendering issues */
[class^="epub-"] {
  max-width: 100%;
  overflow-x: hidden;
}

/* Ensure EPUB content can scroll properly in scrolled mode */
.epub-view {
  overflow-y: auto !important;
  overflow-x: hidden !important;
  -webkit-overflow-scrolling: touch;
}

/* Fix for paginated mode */
.epub-container[data-flow="paginated"] {
  overflow: hidden !important;
}

/* Fix for scrolled/continuous mode */
.epub-container[data-flow="scrolled"],
.epub-container[data-flow="scrolled-doc"] {
  overflow-y: auto !important;
  overflow-x: hidden !important;
  height: 100% !important;
}

/* Ensure epub.js manager doesn't clip content */
#viewer .epub-view,
#viewer iframe {
  min-height: 100% !important;
}

/* ============================================
   PDF VIEWER IMPROVEMENTS
   ============================================ */
.react-pdf__Page {
  max-width: 100%;
  display: flex;
  justify-content: center;
  align-items: flex-start;
}

.react-pdf__Page__canvas {
  max-width: 100% !important;
  height: auto !important;
  margin: 0 auto;
}

.react-pdf__Page__textContent {
  max-width: 100%;
  user-select: text;
}

/* ============================================
   TOUCH IMPROVEMENTS
   ============================================ */
button, a, [role="button"] {
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
}

/* Prevent pull-to-refresh on reader pages */
.reader-container {
  overscroll-behavior-y: contain;
  -webkit-overflow-scrolling: touch;
}

/* ============================================
   LEGACY STYLES (can be cleaned up later)
   ============================================ */
.logo {
  height: 6em;
  padding: 1.5em;
  will-change: filter;
  transition: filter 300ms;
}

.logo:hover {
  filter: drop-shadow(0 0 2em #646cffaa);
}

.logo.react:hover {
  filter: drop-shadow(0 0 2em #61dafbaa);
}

@keyframes logo-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@media (prefers-reduced-motion: no-preference) {
  a:nth-of-type(2) .logo {
    animation: logo-spin infinite 20s linear;
  }
}

.card {
  padding: 2em;
}

.read-the-docs {
  color: #888;
}